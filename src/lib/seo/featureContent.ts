import type { FeatureSlug } from './types';
import { isFeatureWhitelisted } from './config';

export type FeatureContent = {
  title: string;
  body: string;
};

export const featureContentMap: Readonly<Record<FeatureSlug, FeatureContent>> = {
  '4wd': {
    title: '4WD（四輪駆動）の特徴と選び方',
    body:
      '4WD（四輪駆動）は、路面状況に左右されにくく安定した走りを目指せる駆動方式です。雨の日の発進や坂道、雪道などで安心感が増す一方、同じ車種でも2WDに比べて車両価格や燃費、タイヤ交換コストが上がりやすい傾向があります。購入時は、普段の利用シーン（降雪地域か、山道が多いか、アウトドア用途があるか）を具体化し、必要十分な性能かを見極めるのがポイントです。中古車では、下回りの錆や駆動系の異音、タイヤ摩耗の偏りなどをチェックし、整備記録が残っている個体を優先すると安心です。SUV・ミニバン・軽など車種によって4WDの仕組みや特性は異なるため、用途と予算に合う条件で比較しながら選びましょう。',
  },
  hybrid: {
    title: 'ハイブリッド車のメリット・注意点',
    body:
      'ハイブリッド車は、エンジンとモーターを状況に応じて使い分けることで燃費性能と扱いやすさの両立を狙った車です。街乗り中心の利用では特に燃費の差が出やすく、静粛性の高さや滑らかな加速感も魅力になります。一方で、中古車選びでは駆動用バッテリーの状態、冷却系統、整備履歴などが重要です。年式や走行距離だけで判断せず、交換歴の有無や保証の範囲、診断結果が取れるかを確認すると安心です。また、同じハイブリッドでも方式（シリーズ、パラレルなど）や車種によって特性が異なります。通勤や送迎、長距離移動など使い方を整理し、燃費だけでなく維持費や乗り心地、荷室の使い勝手まで含めて比較検討しましょう。',
  },
  mt: {
    title: 'MT（マニュアル）車を選ぶ楽しさと実用性',
    body:
      'MT（マニュアル）車は、クラッチ操作とシフトチェンジによって走りを自分でコントロールできるのが魅力です。エンジン回転を意識した運転ができ、走る楽しさを重視する人に向きます。中古車では、クラッチの滑りや異音、シフトの入り具合、ミッションオイルの状態などを重点的に確認したいところです。渋滞が多い地域では負担が増えるため、日常使いの環境も踏まえて選びましょう。MTは車種によって流通量が少ないこともあり、条件を広げると良い出会いが増えます。スポーツ系だけでなく、軽やコンパクトでも設定がある場合があるので、予算や維持費、燃費、走行距離、修復歴の有無など基本条件を押さえたうえで、納得できる1台を探すのがおすすめです。',
  },
  diesel: {
    title: 'ディーゼル車の特徴（トルク・燃費・メンテ）',
    body:
      'ディーゼル車は、低回転から力強いトルクが出やすく、高速巡航や坂道走行、荷物を積む用途で扱いやすいのが特徴です。燃料費の面でメリットが出る場合もありますが、車種や年式によって排ガス後処理装置の仕様が異なり、メンテナンス性や維持費に差が出ます。中古車選びでは、オイル管理の履歴、DPFなど排気系の状態、エンジン音や振動、アイドリング時の挙動を確認し、短距離走行が中心の使い方に合うかも検討しましょう。長距離移動が多い人には相性が良い一方で、近距離中心だと本来の良さが活きにくいことがあります。用途と走行環境を整理し、信頼できる整備履歴のある個体を優先して比較するのが安心です。',
  },
  suv: {
    title: 'SUVの選び方（サイズ・燃費・使い勝手）',
    body:
      'SUVは、見晴らしの良い視点と荷物が積みやすい実用性、デザイン性の高さで人気のカテゴリです。車格によって取り回しや維持費が大きく変わるため、まずは駐車場のサイズ、家族構成、積載したい荷物の量などを基準に候補を絞るのがおすすめです。街乗り中心ならコンパクトSUVが扱いやすく、遠出やアウトドア用途なら積載性や走破性も含めて比較できます。中古車ではタイヤや足回りの消耗、下回りの状態、4WDモデルなら駆動系の点検履歴も確認すると安心です。装備や安全機能の世代差も大きいので、年式・グレード・走行距離のバランスを見ながら、自分のライフスタイルに合うSUVを探してみてください。',
  },
  minivan: {
    title: 'ミニバンの魅力（送迎・旅行・多人数乗車）',
    body:
      'ミニバンは、多人数乗車や送迎、旅行などの用途で強みを発揮する車です。スライドドアによる乗り降りのしやすさや、シートアレンジの自由度、荷室の広さが魅力で、家族利用の定番として選ばれています。中古車選びでは、スライドドアの開閉状態、電動機構の動作、内装の使用感、3列目シートの格納機構などを確認すると安心です。車体が大きいモデルほど燃費や税金、タイヤ交換費用が上がりやすいので、必要なサイズ感を見極めることが大切です。日常の使い方（通勤・買い物・送迎）と、たまのイベント（旅行・帰省）を両立できる条件を整理し、装備と価格のバランスが良い1台を探しましょう。',
  },
  kei: {
    title: '軽自動車の選び方（維持費・取り回し・装備）',
    body:
      '軽自動車は、維持費の安さと取り回しの良さで幅広い層に人気があります。税金や保険料、燃費、駐車のしやすさなど日常のコストと利便性を重視する人に向きます。一方で、高速走行や長距離移動ではパワー感や静粛性に差が出ることもあるため、使い方に合った車種やグレード選びが重要です。中古車では、エンジンやCVTの状態、足回りの異音、修復歴の有無、内装の使用感を確認し、整備記録がある個体を選ぶと安心です。軽でもスライドドアや先進安全装備が充実したモデルがあり、用途（通勤、買い物、子育て）に合わせて装備と価格のバランスを見ながら比較してみてください。',
  },
  wagon: {
    title: 'ワゴンの特徴（積載性と走りのバランス）',
    body:
      'ワゴンは、セダンの走行安定性と荷室の使い勝手を両立しやすいボディタイプです。低めの重心で運転しやすく、日常の買い物から旅行まで幅広く対応できます。中古車選びでは、荷室の傷や内装の状態、足回りの消耗、タイヤ摩耗の偏りなどを確認し、走行距離と整備履歴を合わせて判断すると安心です。ハイブリッドやターボなどパワートレインの選択肢もあるため、街乗り中心か長距離が多いかで相性が変わります。積載性を重視しつつ、運転のしやすさや燃費、装備の充実度も含めて比較すると、満足度の高い1台に出会いやすいでしょう。',
  },
  sedan: {
    title: 'セダンの魅力（静粛性・快適性・走行安定性）',
    body:
      'セダンは、快適性と走行安定性に優れ、落ち着いた乗り味を求める人に向くボディタイプです。車内の静粛性や高速巡航の安定感が魅力で、通勤から長距離移動まで幅広く活躍します。中古車では、足回りの状態やタイヤの消耗、内装の使用感、事故歴の有無を丁寧に確認し、試乗できるなら直進安定性やブレーキの感触もチェックすると安心です。近年はSUV人気の影響でセダンの選択肢が絞られる一方、条件次第では装備が充実した車両を相場より手頃に選べることもあります。用途と予算を整理し、装備や年式のバランスが良いセダンを比較しながら選びましょう。',
  },
  hatchback: {
    title: 'ハッチバックの選び方（街乗りと積載の両立）',
    body:
      'ハッチバックは、コンパクトな取り回しと荷室の実用性を両立しやすい車です。街中で扱いやすく、後席を倒せば大きな荷物も積めるため、日常からレジャーまで幅広く使えます。中古車では、ボディの小傷や内装の擦れ、バックドア周りの状態、足回りの消耗などを確認し、走行距離と整備履歴を合わせて判断すると安心です。燃費や維持費が比較的抑えやすい一方、車種によって乗り心地や静粛性、後席の広さに差があります。通勤・買い物・週末の外出など具体的な利用シーンを想定し、装備や安全機能、価格とのバランスを見ながら選ぶのがおすすめです。',
  },
} as const;

export function getFeatureContent(slug: string | undefined): FeatureContent | null {
  if (!slug) return null;
  if (!isFeatureWhitelisted(slug)) return null;
  return featureContentMap[slug] ?? null;
}

function warnIfOutOfRange(slug: FeatureSlug, body: string): void {
  const len = body.length;
  if (len < 300 || len > 800) {
    // eslint-disable-next-line no-console
    console.warn(`[featureContent] body length out of range (${len}): ${slug}`);
  }
}

if (process.env.NODE_ENV !== 'production') {
  (Object.entries(featureContentMap) as Array<[FeatureSlug, FeatureContent]>).forEach(([slug, content]) => {
    warnIfOutOfRange(slug, content.body);
  });
}
